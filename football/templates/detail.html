{% extends "base.html" %}

{% block title %}{{ tournament.name }} - details{% endblock %}

{% block content %}

{% load bootstrap3 %}

<h1>{{ tournament.name }}</h1>

<dl class="dl-horizontal">
  <dt>Limit</dt>
  <dd>{{ tournament.limit }} ({{ count }} free)</dd>
</dl>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<div style="overflow:hidden;height:300px;width:600px;">
    <div id="gmap_canvas" style="height:300px;width:600px;">
        <style>#gmap_canvas img{max-width:none!important;background:none!important}</style>
        <a class="google-map-code" href="http://www.themecircle.net" id="get-map-data">{{ tournament.name }}</a></div>
</div>
<script type="text/javascript">
     function init_map(){var myOptions = {zoom:14,center:new google.maps.LatLng({{ tournament.latitude }}, {{ tournament.longitude }}),mapTypeId: google.maps.MapTypeId.ROADMAP};map = new google.maps.Map(document.getElementById("gmap_canvas"), myOptions);marker = new google.maps.Marker({map: map,position: new google.maps.LatLng({{ tournament.latitude }}, {{ tournament.longitude }})});infowindow = new google.maps.InfoWindow({content:"<b>{{ tournament.name }}</b><br/><br/> " });google.maps.event.addListener(marker, "click", function(){infowindow.open(map,marker);});infowindow.open(map,marker);}google.maps.event.addDomListener(window, 'load', init_map);
</script>
{% if user.is_authenticated %}
    {% if enrolled == 0 %}
        <a class="btn btn-default" role="button" href="{% url 'football:join' tournament.id %}">Enroll</a>
    {% elif enrolled > 0 %}
        <a class="btn btn-default btn-lg disabled" role="button">Enroll</a>
    {% endif %}
{% endif %}

{% endblock %}